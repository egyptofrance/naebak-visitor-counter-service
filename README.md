# ๐๏ธ ุฎุฏูุฉ ุนุฏุงุฏ ุงูุฒูุงุฑ - Naebak Visitor Counter Service

**ุฎุฏูุฉ ูุตุบุฑุฉ ูุชุชุจุน ูุนุฏ ุฒูุงุฑ ููุตุฉ ูุงุฆุจู**

---

## ๐ฏ ุงููุตู

ูุฐู ุฎุฏูุฉ ูุตุบุฑุฉ ูุฎุตุตุฉ ูุชุชุจุน ูุนุฏ ุฒูุงุฑ ููุตุฉ ูุงุฆุจูุ ุชุดูู:
- ุนุฏ ุงูุฒูุงุฑ ุงูุฅุฌูุงูู ูุงููููู ูุงููุฑูุฏ
- ุชุชุจุน ูุดุงูุฏุงุช ุงูุตูุญุงุช ุงููุฎุชููุฉ
- ุฅุญุตุงุฆูุงุช ุงูุฃุฌูุฒุฉ ูุงููุชุตูุญุงุช
- ุญูุงูุฉ ูู ุงูู bots ูุงูู rate limiting
- ุฅุนุงุฏุฉ ุชุนููู ููููุฉ ุชููุงุฆูุฉ

---

## ๐๏ธ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

- **Flask 2.3.3** - ุฅุทุงุฑ ุงูุนูู ุงูุฃุณุงุณู
- **Flask-RESTful 0.3.10** - ูุจูุงุก APIs
- **Redis 5.0.1** - ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุชุฎุฒูู ุงูุณุฑูุน
- **APScheduler 3.10.4** - ููููุงู ุงููุฌุฏููุฉ
- **Python 3.11+** - ูุบุฉ ุงูุจุฑูุฌุฉ

---

## ๐ ูููู ุงููุดุฑูุน

```
naebak-visitor-counter-service/
โโโ app.py              # ุงูุชุทุจูู ุงูุฑุฆูุณู ูุน APIs
โโโ models.py           # ููุงุฐุฌ ุงูุจูุงูุงุช ูุฎุฏูุฉ ุงูุนุฏุงุฏ
โโโ utils.py            # ูุธุงุฆู ูุณุงุนุฏุฉ ูุชุญููู ุงูุจูุงูุงุช
โโโ config.py           # ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู
โโโ constants.py        # ุงูุซูุงุจุช ูุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
โโโ requirements.txt    # ุงูุชุจุนูุงุช ุงููุทููุจุฉ
โโโ .env               # ูุชุบูุฑุงุช ุงูุจูุฆุฉ
โโโ README.md          # ูุฐุง ุงูููู
```

---

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช

### ูุชุบูุฑุงุช ุงูุจูุฆุฉ (.env)

```env
FLASK_APP=app.py
FLASK_ENV=development
REDIS_URL=redis://localhost:6379/1
SECRET_KEY=visitor-counter-secret-key
PORT=8006

# ุฅุนุฏุงุฏุงุช ุงูุนุฏุงุฏ
COUNT_UNIQUE_IPS=true
RESET_DAILY=true
BACKUP_INTERVAL_HOURS=1
MAX_VISITORS_PER_IP=10
RATE_LIMIT_WINDOW=60
```

---

## ๐ ุงูุชุดุบูู

### 1. ุชุซุจูุช ุงูุชุจุนูุงุช
```bash
pip install -r requirements.txt
```

### 2. ุชุดุบูู Redis
```bash
redis-server
```

### 3. ุชุดุบูู ุงูุชุทุจูู
```bash
python app.py
```

---

## ๐ก ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (APIs)

### ุชุณุฌูู ุงูุฒูุงุฑุงุช

#### `POST /api/visitors/count/`
ุชุณุฌูู ุฒูุงุฑุฉ ุฌุฏูุฏุฉ

**Body (ุงุฎุชูุงุฑู):**
```json
{
  "page": "home",
  "governorate": "CAI"
}
```

**ุงุณุชุฌุงุจุฉ ูุซุงู:**
```json
{
  "message": "ุชู ุชุณุฌูู ุงูุฒูุงุฑุฉ ุจูุฌุงุญ",
  "visitor_info": {
    "device_type": "ุญุงุณูุจ ููุชุจู",
    "browser": "ุฌูุฌู ูุฑูู",
    "page": "ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ"
  }
}
```

### ุงูุฅุญุตุงุฆูุงุช

#### `GET /api/visitors/stats/`
ุงูุญุตูู ุนูู ุฅุญุตุงุฆูุงุช ุงูุฒูุงุฑ ุงูุฅุฌูุงููุฉ

**ุงุณุชุฌุงุจุฉ ูุซุงู:**
```json
{
  "total_visitors": 15000,
  "daily_visitors": 450,
  "unique_visitors": 8500,
  "page_views": 25000,
  "last_reset": "2024-01-15T00:00:00"
}
```

#### `GET /api/visitors/pages/`
ุฅุญุตุงุฆูุงุช ุงูุตูุญุงุช

**ุงุณุชุฌุงุจุฉ ูุซุงู:**
```json
[
  {
    "page": "home",
    "page_name": "ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ",
    "views": 1200,
    "unique_visitors": 400
  },
  {
    "page": "candidates",
    "page_name": "ุตูุญุฉ ุงููุฑุดุญูู",
    "views": 800,
    "unique_visitors": 267
  }
]
```

#### `GET /api/visitors/hourly/`
ุฅุญุตุงุฆูุงุช ุงูุณุงุนุงุช

#### `GET /api/visitors/tracked-pages/`
ูุงุฆูุฉ ุงูุตูุญุงุช ุงููุชุชุจุนุฉ

### ุฃุฏูุงุช ุงูุฅุฏุงุฑุฉ

#### `POST /api/visitors/reset/`
ุฅุนุงุฏุฉ ุชุนููู ุงูุนุฏุงุฏุงุช ุงูููููุฉ

#### `GET /health`
ูุญุต ุตุญุฉ ุงูุฎุฏูุฉ

---

## ๐ ุงูููุฒุงุช ุงููุชูุฏูุฉ

### ๐ **ุชุญููู ุงูุจูุงูุงุช ุงูุชููุงุฆู**
- **ุชุญุฏูุฏ ููุน ุงูุฌูุงุฒ:** ุญุงุณูุจ ููุชุจูุ ูุงุชู ูุญูููุ ุฌูุงุฒ ููุญู
- **ุชุญุฏูุฏ ุงููุชุตูุญ:** Chrome, Firefox, Safari, Edge, Opera
- **ุชุญุฏูุฏ ูุชุฑุฉ ุงูููู:** ุตุจุงุญุ ุธูุฑุ ูุณุงุกุ ููู

### ๐ก๏ธ **ุงูุญูุงูุฉ ูุงูุฃูุงู**
- **ุญูุงูุฉ ูู ุงูู Bots:** ุชุฌุงูู ุชููุงุฆู ููู crawlers ูุงูู bots
- **Rate Limiting:** ุญุฏ ุฃูุตู ููุฒูุงุฑุงุช ููู IP
- **ุชูุธูู ุงูุจูุงูุงุช:** ุญุฐู ุชููุงุฆู ููุจูุงูุงุช ุงููุฏููุฉ

### โฐ **ุงูููุงู ุงููุฌุฏููุฉ**
- **ุฅุนุงุฏุฉ ุชุนููู ููููุฉ:** ูู ููุชุตู ุงูููู ุชููุงุฆูุงู
- **ูุณุฎ ุงุญุชูุงุทู:** ูู ุณุงุนุฉ (ูุงุจู ููุชุฎุตูุต)

---

## ๐ ุงูุตูุญุงุช ุงููุชุชุจุนุฉ

1. **ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ** (`/`)
2. **ุตูุญุฉ ุงููุฑุดุญูู** (`/candidates`)
3. **ุตูุญุฉ ุงูุฃุนุถุงุก** (`/members`)
4. **ุตูุญุฉ ุงูุดูุงูู** (`/complaints`)
5. **ุตูุญุฉ ุงูุฑุณุงุฆู** (`/messages`)
6. **ุตูุญุฉ ุญูู ุงูููุตุฉ** (`/about`)
7. **ุตูุญุฉ ุงุชุตู ุจูุง** (`/contact`)

---

## ๐ง ุงูุชุทููุฑ

### ุฅุถุงูุฉ ุตูุญุฉ ุฌุฏูุฏุฉ ููุชุชุจุน:
```python
# ูู constants.py
TRACKED_PAGES.append({
    'page': 'new_page',
    'name': 'ุงูุตูุญุฉ ุงูุฌุฏูุฏุฉ',
    'name_en': 'New Page',
    'path': '/new-page',
    'description': 'ูุตู ุงูุตูุญุฉ ุงูุฌุฏูุฏุฉ'
})
```

### ุชุฎุตูุต ุฅุนุฏุงุฏุงุช Rate Limiting:
```env
MAX_VISITORS_PER_IP=20  # ุฒูุงุฏุฉ ุงูุญุฏ ุงูุฃูุตู
RATE_LIMIT_WINDOW=120   # ุฒูุงุฏุฉ ุงููุงูุฒุฉ ุงูุฒูููุฉ
```

---

## ๐ ููุงุญุธุงุช

- ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ ููุงุฎุชุจุงุฑ ูุชู ุชุญููููุง ุชููุงุฆูุงู ุนูุฏ ุจุฏุก ุงูุชุดุบูู
- ุงูุฎุฏูุฉ ูุตููุฉ ููุนูู ุนูู ุงููููุฐ 8006
- ุชุฏุนู ุงูุชุดุบูู ูู ุจูุฆุฉ ุงูุชุทููุฑ ูุงูุฅูุชุงุฌ
- ุงูุจูุงูุงุช ูุญููุธุฉ ูู Redis ูุน ุงูุชูุงุก ุตูุงุญูุฉ ุชููุงุฆู
- ุงูููุงู ุงููุฌุฏููุฉ ุชุนูู ูู ุงูุฎูููุฉ ุชููุงุฆูุงู

---

## ๐ ุงูุชูุงูู ูุน ุงูุฎุฏูุงุช ุงูุฃุฎุฑู

ูุฐู ุงูุฎุฏูุฉ ุชุชูุงูู ูุน:
- **ุฎุฏูุฉ ุงูุฅุญุตุงุฆูุงุช** - ูุชูููุฑ ุจูุงูุงุช ุงูุฒูุงุฑ
- **ุฎุฏูุฉ Gateway** - ูุชูุฌูู ุงูุทูุจุงุช
- **ุงููุงุฌูุฉ ุงูุฃูุงููุฉ** - ูุชุชุจุน ุชูุงุนู ุงููุณุชุฎุฏููู
