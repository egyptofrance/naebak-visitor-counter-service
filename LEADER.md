# ๐ข LEADER - ุฏููู ุฎุฏูุฉ ุนุฏุงุฏ ุงูุฒูุงุฑ ุงูุจุณูุท

**ุงุณู ุงูุฎุฏูุฉ:** naebak-visitor-counter-service  
**ุงููููุฐ:** 8006  
**ุงูุฅุทุงุฑ:** Flask 2.3  
**ูุงุนุฏุฉ ุงูุจูุงูุงุช:** Redis (ููุฅุนุฏุงุฏุงุช ุงูุจุณูุทุฉ)  
**ุงูุฌุฏููุฉ:** APScheduler (ููุชุญุฏูุซ ูู 30 ุซุงููุฉ)  

---

## ๐ **ูุธุฑุฉ ุนุงูุฉ ุนูู ุงูุฎุฏูุฉ**

### **๐ฏ ุงูุบุฑุถ ุงูุฃุณุงุณู:**
ุฎุฏูุฉ ุนุฏุงุฏ ุงูุฒูุงุฑ ูู **ุนุฏุงุฏ ุจุณูุท ุฌุฏุงู** ูุธูุฑ ูู ููุฏุฑ ุงููููุน ูุนุฑุถ "ุนุฏุฏ ุงูุฒูุงุฑ ุงูุญุงูููู" ูุฑูู ุฏููุงูููู ูุชุบูุฑ ุชููุงุฆูุงู ูู 30 ุซุงููุฉ.

### **๐ง ุขููุฉ ุงูุนูู:**
1. **ุงูุฃุฏูู ูุญุฏุฏ ุฑูููู** (ุญุฏ ุฃุฏูู ูุญุฏ ุฃูุตู) ูู ููุญุฉ ุงูุชุญูู
2. **ูู 30 ุซุงููุฉ** ูุชู ุงุฎุชูุงุฑ ุฑูู ุนุดูุงุฆู ุจูู ูุฐูู ุงูุฑูููู
3. **ุงูุนุฏุงุฏ ูุนุฑุถ ุงูุฑูู** ูู ููุฏุฑ ุงููููุน ูู "ุงูุฒูุงุฑ ุงูุญุงูููู: 1,247"
4. **ุงูุชุญุฏูุซ ุชููุงุฆู** ุจุฏูู ุชุฏุฎู ุงููุณุชุฎุฏู

### **๐ ุงููุซุงู:**
- ุงูุฃุฏูู ูุถุน: **ุงูุญุฏ ุงูุฃุฏูู = 800ุ ุงูุญุฏ ุงูุฃูุตู = 2500**
- ุงูุนุฏุงุฏ ูุนุฑุถ ูู 30 ุซุงููุฉ ุฑูู ุนุดูุงุฆู ูุซู: 1,247 โ 1,892 โ 1,156 โ 2,034

---

## ๐ **ุฏูุฑ ุงูุฎุฏูุฉ ูู ููุตุฉ ูุงุฆุจู**

### **๐๏ธ ุงูููุงูุฉ ูู ุงููุธุงู:**
ุฎุฏูุฉ ุจุณูุทุฉ ุชุนูู ูู ุงูุฎูููุฉ ูุชูููุฑ **ุงูุทุจุงุน ุจุงูุญูููุฉ ูุงููุดุงุท** ุนูู ุงููููุน ูู ุฎูุงู ุนุฑุถ ุนุฏุงุฏ ูุชุญุฑู ูู ุงูููุฏุฑ.

### **๐ก ุงูุนูุงูุงุช ูุน ุงูุฎุฏูุงุช ุงูุฃุฎุฑู:**

#### **๐ ุงูุฎุฏูุงุช ุงููุชูุงุนูุฉ:**
- **ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (3000)** - ุนุฑุถ ุงูุนุฏุงุฏ ูู ุงูููุฏุฑ
- **ุฎุฏูุฉ ุงูุฅุฏุงุฑุฉ (8002)** - ุชุญุฏูุฏ ุงูุญุฏ ุงูุฃุฏูู ูุงูุฃูุตู ููุนุฏุงุฏ

#### **๐ ุชุฏูู ุงูุจูุงูุงุช:**
```
Admin Panel (8002) โ ุชุญุฏูุฏ ุงูุญุฏูุฏ โ Visitor Counter (8006)
                                            โ
Frontend (3000) โ ุนุฑุถ ุงูุฑูู ุงูุญุงูู โ ุชุญุฏูุซ ูู 30 ุซุงููุฉ
```

---

## ๐ฆ **ุงูุจูุงูุงุช ูุงูููุงุฐุฌ ูู ุงููุณุชูุฏุน ุงููุฎุฒู**

### **โ๏ธ ุฅุนุฏุงุฏุงุช ุงูุนุฏุงุฏ:**
```python
COUNTER_SETTINGS = {
    'min_visitors': 500,        # ุงูุญุฏ ุงูุฃุฏูู (ุงูุชุฑุงุถู)
    'max_visitors': 3000,       # ุงูุญุฏ ุงูุฃูุตู (ุงูุชุฑุงุถู)
    'update_interval': 30,      # ุงูุชุญุฏูุซ ูู 30 ุซุงููุฉ
    'display_format': '{:,}',   # ุชูุณูู ุงูุนุฑุถ (1,247)
    'enabled': True             # ุชูุนูู/ุฅูุบุงุก ุงูุนุฏุงุฏ
}
```

### **๐๏ธ ุฅุนุฏุงุฏุงุช ุงูุฃุฏูู:**
```python
ADMIN_CONTROLS = [
    {
        "setting": "min_visitors",
        "name": "ุงูุญุฏ ุงูุฃุฏูู ููุฒูุงุฑ",
        "type": "number",
        "min": 1,
        "max": 10000,
        "default": 500
    },
    {
        "setting": "max_visitors", 
        "name": "ุงูุญุฏ ุงูุฃูุตู ููุฒูุงุฑ",
        "type": "number",
        "min": 100,
        "max": 50000,
        "default": 3000
    },
    {
        "setting": "update_interval",
        "name": "ูุชุฑุฉ ุงูุชุญุฏูุซ (ุซุงููุฉ)",
        "type": "number",
        "min": 10,
        "max": 300,
        "default": 30
    },
    {
        "setting": "enabled",
        "name": "ุชูุนูู ุงูุนุฏุงุฏ",
        "type": "boolean",
        "default": True
    }
]
```

---

## โ๏ธ **ุฅุนุฏุงุฏุงุช Google Cloud Run**

### **๐๏ธ ุจูุฆุฉ ุงูุชุทููุฑ (Development):**
```yaml
service_name: naebak-visitor-counter-service-dev
image: gcr.io/naebak-472518/visitor-counter-service:dev
cpu: 0.1
memory: 64Mi
min_instances: 0
max_instances: 1
concurrency: 100
timeout: 300s

environment_variables:
  - FLASK_ENV=development
  - DEBUG=true
  - REDIS_URL=redis://localhost:6379/6
  - DEFAULT_MIN_VISITORS=100
  - DEFAULT_MAX_VISITORS=500
  - UPDATE_INTERVAL=30
```

### **๐ญ ุฅุนุฏุงุฏุงุช ุจูุฆุฉ ุงูุฅูุชุงุฌ:**
```yaml
service_name: naebak-visitor-counter-service
image: gcr.io/naebak-472518/visitor-counter-service:latest
cpu: 0.1
memory: 64Mi
min_instances: 1
max_instances: 2
concurrency: 500
timeout: 30s

environment_variables:
  - FLASK_ENV=production
  - DEBUG=false
  - REDIS_URL=${REDIS_URL}
  - DEFAULT_MIN_VISITORS=500
  - DEFAULT_MAX_VISITORS=3000
  - UPDATE_INTERVAL=30
```

---

## ๐ **ูุงุฌูุงุช ุจุฑูุฌุฉ ุงูุชุทุจููุงุช (APIs)**

### **๐ก ููุงุท ุงูููุงูุฉ ุงูุจุณูุทุฉ:**
```
GET  /health                           - ูุญุต ุตุญุฉ ุงูุฎุฏูุฉ
GET  /api/counter/current              - ุงูุฑูู ุงูุญุงูู ููุนุฏุงุฏ
GET  /api/counter/settings             - ุฅุนุฏุงุฏุงุช ุงูุนุฏุงุฏ ุงูุญุงููุฉ
PUT  /api/counter/settings             - ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช ุงูุนุฏุงุฏ (ุฃุฏูู ููุท)
POST /api/counter/reset                - ุฅุนุงุฏุฉ ุชุนููู ุงูุนุฏุงุฏ (ุฃุฏูู ููุท)
```

### **๐ค ูุซุงู ุงุณุชุฌุงุจุฉ ุงูุฑูู ุงูุญุงูู:**
```json
GET /api/counter/current

{
  "status": "success",
  "data": {
    "current_count": 1247,
    "formatted": "1,247",
    "last_updated": "2025-01-01T12:00:30Z",
    "next_update": "2025-01-01T12:01:00Z"
  }
}
```

### **๐ฅ ูุซุงู ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช:**
```json
PUT /api/counter/settings
Content-Type: application/json
Authorization: Bearer <admin_token>

{
  "min_visitors": 800,
  "max_visitors": 2500,
  "update_interval": 30,
  "enabled": true
}
```

### **๐ค ูุซุงู ุงุณุชุฌุงุจุฉ ุงูุฅุนุฏุงุฏุงุช:**
```json
GET /api/counter/settings

{
  "status": "success",
  "data": {
    "min_visitors": 800,
    "max_visitors": 2500,
    "update_interval": 30,
    "enabled": true,
    "last_modified": "2025-01-01T10:30:00Z",
    "modified_by": "admin@naebak.com"
  }
}
```

---

## ๐ **ุงูุฃูุงู ูุงูุตูุงุญูุงุช**

### **๐ก๏ธ ูุณุชููุงุช ุงููุตูู:**
1. **ุนุงู** - ุนุฑุถ ุงูุฑูู ุงูุญุงูู ููุท
2. **ุฃุฏูู** - ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช ูุฅุนุงุฏุฉ ุงูุชุนููู

### **๐ ุขููุงุช ุงูุญูุงูุฉ:**
- **JWT Authentication** ูุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช
- **Rate Limiting** - 100 ุทูุจ/ุฏูููุฉ ููุนุฑุถ ุงูุนุงู
- **Input Validation** - ุงูุชุญูู ูู ุตุญุฉ ุงูุฃุฑูุงู ุงููุฏุฎูุฉ
- **CORS Protection** - ุญูุงูุฉ ูู ุงูุทูุจุงุช ุงูุฎุงุฑุฌูุฉ

---

## ๐ **ุงููุชุบูุฑุงุช ูุงูุซูุงุจุช ุงูุฃุณุงุณูุฉ**

### **๐ข ุฅุนุฏุงุฏุงุช Redis:**
```python
REDIS_KEYS = {
    'current_count': 'visitor_counter:current',
    'settings': 'visitor_counter:settings',
    'last_update': 'visitor_counter:last_update'
}

REDIS_SETTINGS = {
    'connection_pool_size': 5,
    'socket_timeout': 3,
    'retry_on_timeout': True
}
```

### **โฐ ุฅุนุฏุงุฏุงุช ุงูุฌุฏููุฉ:**
```python
SCHEDULER_CONFIG = {
    'job_id': 'update_visitor_count',
    'trigger': 'interval',
    'seconds': 30,
    'max_instances': 1,
    'coalesce': True
}
```

---

## ๐ **ุงููุฑูู ุจูู ุจูุฆุงุช ุงูุชุดุบูู**

### **๐๏ธ ุจูุฆุฉ ุงูุชุทููุฑ (Development):**
- **ุงูุญุฏ ุงูุงูุชุฑุงุถู:** 100-500 ุฒุงุฆุฑ
- **ุงูููุงุฑุฏ:** 0.1 CPU, 64Mi Memory (ุฎููู ุฌุฏุงู)
- **ุงูุชุณุฌูู:** ููุตู ููุชุชุจุน

### **๐ญ ุจูุฆุฉ ุงูุฅูุชุงุฌ (Production):**
- **ุงูุญุฏ ุงูุงูุชุฑุงุถู:** 500-3000 ุฒุงุฆุฑ
- **ุงูููุงุฑุฏ:** 0.1 CPU, 64Mi Memory (ูุญุณู)
- **ุงูุชุณุฌูู:** ุฃุฎุทุงุก ููุท

---

## ๐ **ุฎุทูุงุช ุงูุชุทููุฑ ุงููุทููุจุฉ**

### **๐ฏ ุงููุฑุญูุฉ ุงูุฃููู - ุงูุฃุณุงุณูุงุช:**
1. โ ุฅุนุฏุงุฏ ุงูุจููุฉ ุงูุฃุณุงุณูุฉ
2. โณ ุชุทุจูู ูููุฏ ุงูุฃุฑูุงู ุงูุนุดูุงุฆูุฉ
3. โณ ุฑุจุท Redis ูุญูุธ ุงูุฅุนุฏุงุฏุงุช
4. โณ ุชุทุจูู ุงูุฌุฏููุฉ ุงูุชููุงุฆูุฉ (ูู 30 ุซุงููุฉ)
5. โณ ุฅูุดุงุก APIs ุงูุจุณูุทุฉ

### **๐ฏ ุงููุฑุญูุฉ ุงูุซุงููุฉ - ููุญุฉ ุงูุชุญูู:**
1. โณ ุฑุจุท ุฎุฏูุฉ ุงูุฅุฏุงุฑุฉ
2. โณ ุชุทุจูู ูุงุฌูุฉ ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช
3. โณ ุฅุถุงูุฉ ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
4. โณ ุงุฎุชุจุงุฑ ุงูุชูุงูู ูุน ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

### **๐ฏ ุงููุฑุญูุฉ ุงูุซุงูุซุฉ - ุงูุชุญุณูู:**
1. โณ ุชุญุณูู ุงูุฃุฏุงุก
2. โณ ุฅุถุงูุฉ ุงููุฑุงูุจุฉ
3. โณ ูุดุฑ ุจูุฆุฉ ุงูุฅูุชุงุฌ

---

## ๐ **ุงูููุงุฑุฏ ูุงููุฑุงุฌุน**

### **๐ง ุฃุฏูุงุช ุงูุชุทููุฑ:**
- **Flask 2.3** - ุฅุทุงุฑ ุงูุนูู ุงูุฃุณุงุณู
- **Redis** - ุญูุธ ุงูุฅุนุฏุงุฏุงุช ูุงูุฑูู ุงูุญุงูู
- **APScheduler** - ุงูุฌุฏููุฉ ุงูุชููุงุฆูุฉ ูู 30 ุซุงููุฉ
- **Random** - ูููุฏ ุงูุฃุฑูุงู ุงูุนุดูุงุฆูุฉ

---

**๐ ููุงุญุธุฉ:** ูุฐุง ุนุฏุงุฏ ุจุณูุท ุฌุฏุงู - ูุฌุฑุฏ ุฑูู ุนุดูุงุฆู ูุชุบูุฑ ูู 30 ุซุงููุฉ ุจูู ุญุฏูู ูุญุฏุฏููุง ุงูุฃุฏูู.
